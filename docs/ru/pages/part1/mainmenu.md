# Основное меню головного программного модуля

Основное меню открывается при запуске головного программного модуля и выглядит, как представлено на рисунке: {#anchor1}

![alt-текст](_assets/main_module.png "Основное меню головного программного модуля")

Основное меню состоит из четырёх составных элементов:
+ Заголовок
+ Функциональное меню
+ Панель инструментов работы с объектами
+ Информационная строка

## Заголовок

Заголовок основного меню содержит постоянный текст: 
«##(dm) Цифровая Карта##», после которого в кавычках отображается имя текущей рабочей папки (в примере – «##ООМ##» на рисунке [основного меню головного программного модуля](#anchor1)).

## Функциональное меню

Функциональное меню состоит из наименований выпадающих меню, которые обеспечивают выполнение операций:
+ **Проект** – создание и управление проектом (набором карт, растров);
+ **Карта** – создание и выполнение операций с файлами цифровых карт;
+ **Растр** – открытие и выполнение операций с файлами растровых изображений;
+ **Рельеф** – создание и выполнение операций с файлами рельефа местности;
+ **Выборка** – работа с выборками объектов;
+ **Разное** – вызов различных операций работы с картами и табличными данными;
+ **Задачи** – настраиваемое меню вызова программных приложений (появляется в функциональном меню только при наличии в папке WORK файла task.###, содержащего [описание подключаемых программных приложений](#anchor2));
+ **Окна** – открытие различных окон редактора;
+ **Настройка** – выполнение операций по установлению опций отображения и обработки информации, вызов программ редактирования файлов Классификатора;
+ **?** – вызов справки о программе.

## Настройка вызова программных приложений {#anchor2}

Настройка вызова программных приложений заключается в описании в текстовом файле с именем task.### вызываемых программных приложений. Файл настроек должен быть размещён в папке WORK внутри текущей рабочей папки.

Пример содержимого файла task.###:
```
dm_util1.dll $dm_lace_all "Сшивка объектов"
dm_util1.dll $dm_lace_map "Подшить карту"
dm_util.dll #dm_layers_on_list "Создание слоев карты"
dbf "Редактор таблиц - dbf.exe"
"sxf_dm.bat /nocmd" "Пакетный импорт sxf-->dm"
"s42_95.bat /nocmd" "Пакетное преобразование СК42-->СК95"
"s95_42.bat /nocmd" "Пакетное преобразование СК95-->СК42"
```
Каждая строка содержит описание вызова одного приложения, которое состоит из трёх частей, разделённых пробелом. В начале строки указывается имя файла приложения (это может быть dll-библиотека или исполняемый exe-файл). Для dll-библиотеки, после её имени, указывается имя вызываемой из неё процедуры, затем через пробел в кавычках – отображаемое в головном меню наименование приложения. На рисунке ниже приведено изображение выпадающего меню «Задачи» для приведённого выше файла task.###:

![alt-текст](_assets/menu_task.png "Пример вызова программных приложений")

Если требуется формировать группы задач по теме или создавать разделы в списке, то можно использовать символы «#» и «-». Символ «#» обозначает начало и конец группы, если заголовок группы содержит пробелы, строка с заголовком убирается в кавычки. Символ «-» разделяет строки списка чертой. Пример содержания файла «task.###» с разделами и группами задач:
```
"#Обработка растров"
Tiff "Преобразование растров - Tiff.exe"
Divw "Цветоделение растра - Divw.exe"
msk67p "Нарезка растра по объектам карты - Msk67p.exe"
PP "Работа с фотопланами - PP.exe"
#
"#Контроль карт"
otk "Проверка карт - OTK.exe"
rg "Контроль адресов - Rg.exe"
-
dll_txt1.dll $dm_err_ft "Проверка шаблонов"
rel_hf.exe  "Проверка рельефа - Rel_hf.exe"
dll_rel.dll $dm_rlz_blue "Проверка гидрографии по рельефу"
#
#Топография
ADD_BLD "Создание домов в кварталах - ADD_BLD.exe"
Frame_SXF "Создание координатной сетки - Frame_SXF.exe"
rel_dmw "Построение горизонталей - Rel_dmw.exe"
#
```
На рисунке ниже показан выпадающий список меню «Задачи», где задачи распределены по разделам:

![alt-текст](_assets/menu_task2.png "Пример вызова программных приложений собранных по разделам")

Вызываемые программные приложения должны быть размещены в папке BIN вместе с головным программным модулем DMW.EXE.

## Панель инструментов редактирования

На панели инструментов размещены три группы кнопок, предназначенных для выполнения операций создания и редактирования объектов цифровых карт:

![alt-текст](_assets/panel_edit_tools.png "Панель инструментов редактирования")

Первая группа содержит кнопки, выполняющие команды:

![alt-текст](_assets/but_cancel.png) — отмена операций создания, редактирования и удаления объектов;
![alt-текст](_assets/but_cancel_cancel.png) — возврат отмененных операций.

Вторая группа содержит кнопки для выбора режима создания координатного описания линейных и площадных объектов:

![alt-текст](_assets/but_rejim_polyline.png) — классическая полилиния – фиксация мышью положения каждой точки;
![alt-текст](_assets/but_rejim_rect.png) — полилинии с прямыми углами между точками;
![alt-текст](_assets/but_rejim_ellips.png) — эллипс (характер локализации – 5);
![alt-текст](_assets/but_rejim_curve.png) — кривая (характер локализации – 6 у линейного объекта или 7 у площадного).

Третья группа содержит кнопки инструментов, предназначенных для создания и редактирования объектов активной карты. Они сгруппированы по разделам, представленным в виде страниц (вкладок) в многостраничном поле. Для перехода к нужной странице нужно щёлкнуть мышью по соответствующему ярлыку внизу многостраничного поля. Первоначально в многостраничном поле панели инструментов представлены следующие разделы (страницы):

![alt-текст](_assets/tab_panel.png "Инструменты создания и редактирования объектов")

+ **Объект** – набор инструментов для работы с объектами;
+ **Точки** – набор инструментов для редактирования метрики объектов;
+ **Разное** – дополнительные инструменты для работы с объектами карты;
+ **Выборка** – добавление/удаление объектов в выборку и выполнение операций с выборками объектов;
+ **s57** – инструменты для работы с объектами в цепочно-узловой структуре;
+ **Растр** – работа с точками привязки и автоматической векторизацией растрового изображения.

Слева от кнопок инструментов расположена кнопка **выбора объекта** ![alt-текст](_assets/but_cursor.png "Кнопка активации объекта карты"), предназначенная для выделения объекта (активный объект) без выполнения каких-либо операций.

## Информационная строка

В информационной строке, расположенной в нижней части основного меню, отображается информация двух видов:

Описание выделенного (активного объекта).
:   Описание объекта состоит из классификационного кода, характера локализации, наименования акронима и класса объекта. Пример представлен на рисунке:
![alt-текст](_assets/infostroka2.png "Описание активного объекта в информационной строке")

Перед классификационным кодом по запросу (клавиша «V») указывается номер уровня, на котором расположен объект, если этот уровень больше двух.

Подсказка оператору об ожидаемых действиях для выбранного инструмента Редактора.
:   Подсказка в зависимости от выбранного инструмента редактирования или создания объекта может содержать следующий текст:
+ `Объект…` – ожидается указание (выбор) объекта;
+ `Второй объект` – ожидается указание второго объекта для выполнения действия, в котором участвуют два объекта;
+ `Точка…` – ожидается ввод точки мышью при векторизации или указание точки на объекте для её сдвига, или указание точки для разделения объекта и т.п;
+ `Крайняя точка…` – ожидается указание первой или последней точки объекта для удлинения или укорочения объекта;
+ `Первая точка…` – ожидается указание первой точки объекта для указания начала перемещения метрики объекта;
+ `Вторая точка…` – ожидается указание второй точки объекта для указания конца участка перемещения метрики объекта;
+ `Точка внутри отрезка…` – после указания конца участка перемещения метрики замкнутого линейного или площадного объекта ожидается указание точки объекта, участок которой необходимо переместить;
+ `Объект ([rol_1]…… [rol_N].)` – ожидается указание объекта в карте для установления с ним связи создаваемого нового объекта. В скобках перечисляются акронимы допустимых ролей.

Возможны появления других видов подсказок в зависимости от выполняемой операции редактирования объектов.