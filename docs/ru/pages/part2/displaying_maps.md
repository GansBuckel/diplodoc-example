# Отображение цифровых карт

## Отображение объектов – общие сведения

Объекты карты отображаются в окне Редактора программы в соответствии с их расположением на карте. Порядок отображения объекта определяют следующие факторы:
+ характер локализации;
+ условный знак или параметры отображения, назначенные конкретному объекту на карте;
+ опции отображения карты (устанавливаются пользователем);
+ последовательность вывода слоёв карты и объектов на экран (определяется программой и пользователем);
+ механизм скрытия слоёв (управляется пользователем);
+ пороги отображения (задаются пользователем).

Работа с объектами карты осуществляется с помощью инструментов, расположенных на многостраничном поле панели инструментов в главном окне программы.

### Класс объекта

Под классом объекта в данном документе понимается совокупность классификационного кода и характера локализации объекта. Все объекты данного класса имеют, как правило, одинаковый условный знак, за исключением тех объектов одного класса, у которых условное графическое отображение зависит от их семантического описания. В каждом классификаторе может присутствовать только один объект определённого класса.

### Условный знак

Условный знак – это набор и конкретные значения признаков, определяющих изображение объектов одного вида на экране монитора. Набор признаков определяется характером локализации объекта и семантическим описанием объекта, а способ визуализации данного набора устанавливается в классификаторе.

Программа позволяет назначить конкретному объекту на карте параметры изображения, отличающиеся от условного знака объектов этого вида, с помощью инструмента «Изменить графику объекта» ![alt-текст](../_assets/tool_color.png) из вкладки «Объект» на панели инструментов.

### Настройка отображения названия объекта

Опции «Акроним» и «Название» в списке главного меню «Настройка» – «Название объекта» определяют, что будет отображаться в строке подсказки Редактора при активации объекта в карте и в верхней строке Легенды карты при выборе объекта в списке Легенды. Данные опции задействуются в классификаторах, где в качестве разделителя в названии объектов используется символ «/», который является разделителем позиций текста для данной опции, а также в новых классификаторах, где используются акронимы объектов. Пример работы опций представлен на рисунке:

![alt-текст](_assets/setting_acronym.png "Настройка отображения информации об объекте в строке подсказки и легенде карты")
 
## Порог (уровень) отображения

Поскольку цифровая карта может отображаться в различных масштабах, то порог отображения определяет нижнее (самое большое) значение масштаба, с которого начинает отображаться на экране определённый объект, слой или карта целиком. Наличие порогов позволяет управлять нагрузкой карты при разных увеличениях и избегать перенасыщенности изображения мелкими или избыточными деталями (генерализация). Порог может быть назначен для всей карты, входящей в проект, для определённого слоя или для конкретного объекта карты. Далее под объектами понимаются карты, слои и объекты карты.

Пороги измеряются в единицах отношения размеров текущей карты к размерам участка карты, который отобразили бы в окне, развернутом во весь экран, при данном увеличении.

Нулевое значение порога означает, что объект отображается всегда.

Если включена опция «Все объекты» в опциях отображения, то пороги отображения игнорируются и все объекты отображаются при любых масштабах.

Управление порогами отображения карт описано ниже.

## Окно отображения карты (Редактор)

Окно «Редактор» служит для отображения карты с возможностью изменения масштаба изображения объектов карты и навигации (передвижения) по карте. В данном окне осуществляются непосредственные действия по созданию, выбору и редактированию объектов.

Окно имеет следующий вид:

![alt-текст](_assets/win_editor.png "Окно «Редактор»")

На верхней рамке окна «Редактор» отображается информация о названии активной карты проекта и служебная метка карты.

Обозначения служебных меток карты:
+ (x) – в карте нельзя создать объекты в цепочно-узловой структуре, т.е. возможны только объекты типа «картографическое спагетти»;
+ (o) – в карте могут присутствовать объекты в цепочно-узловой структуре;
+ (w) – в карте возможна работа с номерами характеристик больше 1024 (в версиях ПК «Нева» до 2014 года работа с большими характеристиками возможна только при запуске программы с ключом «/hf16»).

На нижней рамке окна «Редактор» находится набор инструментов, предназначенных для увеличения, уменьшения и перемещения изображения внутри окна, измерения расстояния, а также строка отображения координат, позволяющая отображать информацию в нескольких режимах.

## Координатная строка

Поле «Координаты» служит для отображения координат текущей позиции курсора в окне Редактора карт. При запуске программы данное поле всегда находится в режиме показа координат, но в дополнение к указанной функции его возможно переключить на следующие режимы работ:
+ Режим «Координаты»
+ Режим «Масштаб»
+ Режим «Линейка»

Переключение режима производится в диалоге, который вызывается нажатием правой кнопки мыши на координатной строке:

![alt-текст](_assets/coord_line_change_mode.png "Контекстное меню режима работы координатной строки окна Редактора")

### Режим «Координаты»

По умолчанию координаты отображаются в местных координатах проекта в метрах:

![alt-текст](_assets/coord_line.png "Координаты курсора в координатной строке окна редактора")

Для переключения режима показа координат необходимо кликнуть правой кнопкой мыши в строку «Координаты» и выбрать в появившемся диалоге требуемый вариант отображения:

![alt-текст](_assets/coord_line_mode.png "Контекстное меню выбора режима показа координат в координатной строке")

Режим «Расстояние, азимут» устанавливается и работает при создании или редактировании отрезков контура (в режиме активной функции «Создать простой объект» ![alt-текст](../_assets/but_mode_new.png) в панели инструментов).

### Режим «Масштаб»

Координатная строка в режиме отображения масштаба выглядит следующим образом:

![alt-текст](_assets/mode_scale.png "Отображение в координатной строке текущего масштаба карты")

Нажав кнопку ![alt-текст](_assets/mode_scale_but_list.png) в строке «Масштаб», можно выбрать вариант фиксированного масштаба из списка:

![alt-текст](_assets/mode_scale_menu.png "Меню выбора масштаба отображения карты")

Кнопками ![alt-текст](_assets/mode_scale_but_left.png) и ![alt-текст](_assets/mode_scale_but_right.png) можно переключать масштабы вверх и вниз по списку, не вызывая самого списка.

Внизу списка масштабов находится команда «Интернет уровень…», открывающая диалог выбора уровня отображения в соответствии с принятыми для WEB-среды масштабами:

![alt-текст](_assets/web_scale.png "Диалог команды «Интернет уровень» из меню выбора масштаба отображения карты")

Ниже команды «Интернет уровень…» есть возможность задания проекции, применяемой для отображения данных с интернет-ресурса:
+ mercator
+ geodetic
+ google

### Режим «Линейка»

В режиме «Линейка» на координатной строке отображается сантиметровая шкала с делениями, где справа от шкалы показывается длина одного деления в метрах, исходя из масштаба карты, установленного в паспорте карты:

![alt-текст](_assets/mode_ruler.png "Отображение в координатной строке масштабной линейки")

## Увеличение масштаба

После нажатия на кнопку ![alt-текст](_assets/but_zoom_in.png) происходит переход в режим задания прямоугольного фрагмента, который следует увеличить до размеров всего окна. При этом курсор мыши в окне отображения изображается крестиком с прямоугольником ![alt-текст](_assets/cur_zoom.png). Задание прямоугольника окна может происходить двумя способами:

+ интерфейс в стиле «Windows»;
+ интерфейс в стиле «DOS» (установлен по умолчанию).

Стиль определяется в опциях отображения (команда «Настройка» – «Опции…», флажок «\<dos\> интерфейс»).

При использовании первого способа для указания прямоугольника необходимо нажать левую кнопку мыши и, не отпуская её, перетаскивать курсор. При этом происходит растягивание прямоугольника. После достижения необходимого размера следует отпустить кнопку для фиксации прямоугольника.

При использовании второго способа для указания прямоугольника необходимо щёлкнуть левой кнопкой мыши в месте расположения первого угла, а затем передвигать курсор при отпущенной кнопке. При этом происходит растягивание прямоугольника. После достижения необходимого размера следует щёлкнуть либо левой кнопкой мыши для фиксации прямоугольника, либо правой – для отмены операции.

После фиксации фрагмента, программа увеличивает указанный фрагмент до размеров окна.

## Уменьшение масштаба и работа с инструментом «Линейка»

Нажатие кнопки ![alt-текст](_assets/but_zoom_out.png) вызывает меню со следующими командами:

![alt-текст](_assets/small_zoom_but_menu.png "Меню кнопки уменьшения масштаба")

Команда «Интернет уровень…» появляется при подключении к сети интернет, если указана папка для КЭШа интернет ресурса (команда функционального меню «Растр» – «Интернет» – «Кэш…») и используется для переключения уровня подгружаемого в качестве растровой подложки интернет ресурса. Аналог указания уровня подложки интернет ресурса в диалоге окна «Проект»:

![alt-текст](_assets/zoom_out_project.png "Уровень подложки интернет ресурса в диалоге окна «Проект»")

### Линейка – многофункциональное инструментально окно

Окно многофункционального инструмента «Линейка» предназначено для расчёта расстояний и углов по карте, а также ряда других операций:

![alt-текст](_assets/win_ruler.png "Окно инструмента «Линейка»")

Вызов окна «Линейка» можно осуществлять с помощью горячей клавиши F4, а также внизу окна «Редактор» через кнопку уменьшения масштаба ![alt-текст](_assets/but_zoom_out.png):

![alt-текст](_assets/win_ruler_open.png "Вызов инструмента «Линейка» через кнопку уменьшения масштаба")

Функции инструмента «Линейка»:
+ отображение координат и высоты каждой точки карты
+ определения азимута направления от одной точки до другой
+ определение расстояния между точками, а также протяжённость пути указанного последовательностью точек на карте
+ вычисление относительной высоты объектов
+ вычисление объёма объектов
+ отображение положения позиции точки профиля
+ отображение высоты в виде всплывающей подсказки рядом с курсором, при перемещении курсора в окне редактора карты с открытым в проекте файлом матрицы рельефа

Инструмент «Линейка» может быть задействован в нескольких режимах:
+ [Режим «Линейка»](#anchor1)
+ [Режим «Высота»](#anchor2)
+ [Режим «Объём»](#anchor3)
+ [Режим «Метрика – 2 точки»](#anchor4)
+ [Режим «Подсказка высоты»](#anchor5)
+ [Режим «Линейка на карте»](#anchor6)
+ [Режим «Координаты сетки»](#anchor7)

При вызове инструмента «Линейка» курсор в окне Редактора принимает форму перекрестия ![alt-текст](_assets/cur_ruler.png). Смена режимов работы инструмента «Линейка» производится по клику правой кнопки мыши в окне инструмента, после чего в выпадающем списке выбирается нужный режим работы.

![alt-текст](_assets/win_ruler_change_mode.png "Выбор режима работы инструмента «Линейка»")

#### Окно «Линейка» – режим «Линейка» {#anchor1}

Данный режим работы задействован по умолчанию при первом вызове инструмента и позволяет получить координатную информацию об указанной точке и о рисуемой линии. Для получения информации о линии следует рисовать линию так же, как при создании нового объекта. При этом в окне отображается следующая информация:

![alt-текст](_assets/tool_ruler_about.png "Значения полей инструмента «Линейка» в режиме «Линейка»")

+ Левое поле «Расстояние» – общая протяжённость метрики, включая текущую позицию курсора;
+ Среднее поле – расстояние от последней поставленной точки до позиции курсора;
+ Поле «Азимут/Угол» – азимут либо угол указанного направления, в зависимости от выбранного параметра;
+ Поле «Координаты» – координаты текущей позиции курсора «Широта, Долгота», если карта в географической системе координат, либо X, Y если карта в прямоугольной системе координат;
+ Поле «Высота» – значение высоты отображается только при загруженном в проект файле рельефа на данную местность.

При работе с картами в равноугольных проекциях для измерения расстояния предусмотрена возможность выбора режима измерения:
+ на эллипсоиде (по умолчанию, т.к. данный режим даёт минимальные погрешности при измерении);
+ в проекции (если требуется проводить измерения в проекции карты).

Также есть возможность выбора системы координат, если требуется производить измерения в системе координат отличной от системы координат карты (кнопка ![alt-текст](_assets/mode_scale_but_list.png) в правом нижнем углу).

#### Окно «Линейка» – режим «Высота» {#anchor2}

Данный режим работы линейки предназначен для автоматического внесения вычисляемого значения высоты объектов в заданную характеристику, путём измерения линейкой теней объектов по данным ДЗЗ. Применяется обычно при оцифровке зданий и сооружений, где требуется наличие значений относительной высоты у объектов для построения реалистичных 3D моделей местности.

Перед использованием функции автоматического внесения значения высоты в атрибуты объектов необходимо в опциях программы задать номер характеристики, в которую программа будет писать полученное значение. Для этого необходимо из функционального меню главного окна программы вызвать диалог опций командой «Настройка» – «Опции…» или горячей клавишей F8, где в разделе «Разное», в поле «Атрибут <высота по линейке>» указать номер характеристики для значения высоты, как показано на рисунке:

![alt-текст](_assets/options_atr_h.png "Установка атрибута высоты для работы с инструментом «Линейка» в режиме «Высота»")

После указания атрибута высоты в опциях следует подобрать коэффициент вычисления значения высоты с учётом времени снимка, т.к. тени от объектов в разное время суток имеют, соответственно, разную длину. Последовательность действий для подбора коэффициента высоты следующая:
+ Открыть карту совместно с растровым изображением данных ДЗЗ;
+ С помощью горячей клавиши F4 вызвать инструмент «Линейка» и, кликнув правой кнопкой мыши в появившемся окне линейки, переключить его левой кнопкой в выпадающем списке на режим «Высота», при этом окно примет следующий вид:

![alt-текст](_assets/win_ruler_tool_h.png "Подбор коэффициента для измерения атрибута высоты инструментом «Линейка» в режиме «Высота»")

+ Измеряя тени «эталонных» объектов (высота которых известна), подобрать коэффициент высоты так, чтобы при измерении длины тени объекта полученное значение высоты было наиболее близкое к реальности. При отсутствии точных сведений о высоте «эталонных» объектов, по которым подбирается коэффициент, данные действия выполняются по характерным объектам с чётко дешифрируемым контуром и тенью, приблизительная высота которых известна. В качестве таких характерных объектов могут быть использованы навесы автозаправок, у которых, как правило, высота козырька около 5 метров.

Действия для автоматической записи вычисленного значения высоты в атрибут существующего объекта:
+ Убедиться, что в инструменте «Линейка» выбран и настроен режим «Высота».
+ В режиме выбора объекта, когда на панели инструментов нажата кнопка ![alt-текст](../_assets/but_mode_activ.png), активировать нужный объект карты.
+ Кликом левой кнопки мыши указать начальную точку тени объекта, затем конечную точку тени объекта. После указания второй точки программа запишет вычисленное значение высоты в заданную характеристику выбранного объекта. При этом у площадных объектов будет меняться цвет контура на синий.
+ Повторить аналогичные действия со следующим объектом.

Действия для автоматической записи вычисленного значения высоты в атрибут создаваемого объекта:
+ Убедиться, что в инструменте «Линейка» выбран и настроен режим «Высота».
+ В режиме создания нового объекта ![alt-текст](../_assets/but_mode_new.png) после обозначения окончания оцифровки объекта правой кнопкой мыши, нажать горячую клавишу F4, при этом на панели инструментов автоматически активируется режим выбора объектов ![alt-текст](../_assets/but_mode_activ.png), затем левой кнопкой мыши указать начальную точку тени объекта, затем конечную точку тени объекта. После указания второй точки программа запишет созданный объект уже со значением высоты в заданной характеристике и автоматически произойдёт переход в режим создания нового объекта ![alt-текст](../_assets/but_mode_new.png), для оцифровки следующего. Цвет контуров площадных объектов созданных таким образом, также будет меняться на синий.

#### Окно «Линейка» – режим «Объём» {#anchor3}

Режим «Объём» работает при наличии в проекте файла рельефа и позволяет измерять объём объектов с учётом матрицы высот.

При переходе в режим необходимо точками обозначить область полигона для расчёта объёма. Рядом с курсором, во время его перемещения по карте, отображается высота данной точки местности, так же как и в режиме «Подсказка высоты», только подсказка высвечивается в левом верхнем углу курсора. В окне «Линейка», при перемещении курсора по карте, в нижней строке отображаются координаты позиции курсора и высота точки местности под курсором.

По окончании оцифровки полигона, на карте появляется контур розового цвета и в верхней строке окна «Линейка» выводится результат:

![alt-текст](_assets/tool_ruler_mode_volume.png "Измерение объёма объекта инструментом «Линейка»")

Контур расчётной области не является объектом карты и убирается после перезапуска программы.

#### Окно «Линейка» – режим «Метрика – 2 точки» {#anchor4}

Режим предназначен для работы с профилем рельефа. В данном режиме двумя точками в окне «Редактор» указывается вектор сечения профиля рельефа, который будет отображаться в виде стрелки, как представлено на рисунке:

![alt-текст](_assets/tool_ruler_mode_profile.png "Указание вектора сечения профиля рельефа инструментом «Линейка»")

Если в проект загружен файл рельефа местности, то при указании в окне «Профиль» места сечения рельефа (вертикальная линия синего цвета на рисунке ниже), на стрелке маркируются координаты этого места розовым крестиком. Окно «Профиль» вызывается командой функционального меню «Окна» – «Профиль» или горячими клавишами Shift+Z.

![alt-текст](_assets/relief_profile.png "Окно профиля рельефа")

#### Окно «Линейка» – режим «Подсказка высоты» {#anchor5}

Режим линейки «Подсказка высоты» работает при наличии в проекте файла рельефа. При включении данного режима рядом с курсором, во время его перемещения по карте, отображается высота данной точки местности:

![alt-текст](_assets/ruler_mode_height_hint.png "Подсказка высоты на карте")

#### Окно «Линейка» – режим «Линейка на карте» {#anchor6}

В режиме «Линейка на карте» в левом верхнем углу окна Редактора карты отображается миллиметровая шкала, исходя из масштаба, указанного в паспорте карты: 

![alt-текст](_assets/ruler_on_the_map.png "Отображение миллиметровой шкалы на карте")


#### Окно «Линейка» – режим «Координаты сетки» {#anchor7}

![alt-текст](_assets/ruler_grid_coord.png "Окно линейки в режиме «Координаты сетки»")

## Перемещение изображения («Передвинуть точку»)

Перемещение изображения карты возможно несколькими способами.

### 1-й способ перемещения изображения

Для того что бы переместить изображение в окне Редактора необходимо подвести курсор к нужному месту на изображении, нажать колесо мыши и удерживая нажатие перемещать курсор по экрану, курсор при этом принимает вид сжатой ладони ![alt-текст](../_assets/cur_mov_image-hand2.png). Завершение операции выполняется отпусканием колеса мыши.

### 2-й способ перемещения изображения

После нажатия на кнопку с изображением ладони ![alt-текст](../_assets/but_hand.png) в наборе инструментов на нижней рамке окна Редактора, происходит переход в режим перемещения изображения, курсор при этом принимает вид указывающей руки ![alt-текст](../_assets/cur_mov_image-hand.png).
Чтобы сдвинуть изображение необходимо перевести курсор в виде руки к точке на карте, нажать на левую кнопку мыши и, не отпуская нажатия, переместить курсор по экрану, курсор при этом принимает вид сжатой ладони ![alt-текст](../_assets/cur_mov_image-hand2.png). Завершение операции выполняется отпусканием кнопки, а выход из режима перемещения производится по нажатию правой кнопки мыши.

### 3-й способ перемещения изображения

При активном окне Редактора можно осуществлять сдвиг изображения по горизонтали и вертикали нажатием клавиши «Пробел», при этом изображение будет перемещаться относительно центра окна в сторону, где находится курсор мыши.

### 4-й способ перемещения изображения

Дополнительно есть возможность перемещения изображения в окне карты по заданным координатам. Для этого необходимо выделить кнопку с изображением ладони ![alt-текст](../_assets/but_hand.png) в наборе инструментов на нижней рамке окна Редактора и нажать клавишу «С» на клавиатуре. В результате появится диалоговое окно «Координаты», представленное на рисунке:

![alt-текст](_assets/win_coordinates_mov_image.png "Перемещение изображения карты в окне редактора по заданным координатам")

С помощью данного диалога можно производить перемещение изображения, изменяя координаты в соответствующих ячейках.

### 5-й способ перемещения изображения

Перемещение изображения карты в окне редактора клавишами курсора. Для активации этого способа необходимо в диалоге «Опции» на странице «Разное» установить галочку «Сдвигать окно на» в разделе «Курсорные клавиши» и указать шаг смещения и, если необходимо плавное смещение, можно задать интервал времени для анимации сдвига.

![alt-текст](_assets/options_mov_image_param.png "Диалог «Опции» – настройка сдвига изображения карты курсорными клавишами")

## Перерисовка окна

После изменения некоторых опций отображения или при работе с объектами карты (например, при удалении или перемещении объектов) требуется перерисовать изображение в окне редактора. Чтобы применились установленные опции отображения или чтобы убрать след от исходного положения отредактированного объекта, необходимо нажать клавишу «D» на клавиатуре или кнопку ![alt-текст](../_assets/but_d.png) из набора инструментов на нижней рамке окна Редактора, при этом произойдёт полная перерисовка изображения в окне Редактора. 

Полная перерисовка экрана происходит также при смене текущего масштаба отображения (при зуммировании карты).

## Отображение набора карт

Программа отображает все открытые в данный момент карты (все карты, входящие в текущий проект), в соответствии с их взаимным расположением на поверхности Земли.

Т.к. все карты проекта отображаются в системе координат активной карты, то остальные (неактивные) карты могут быть повёрнуты, а отображаемые в окне Редактора координаты точек на этих картах могут отличаться от действительных. При смене активной карты система координат «подстраивается» под её изображение.

Если в окне опций (F8) включена опция «Все карты», активная карта не влияет на отображение остальных карт, т.к. в этом случае для всего проекта выбирается осевой центральный меридиан и относительно него строится отображение всех карт.

Объекты карт изображаются с использованием условных знаков, назначенных соответствующим видам объектов в классификаторе.

Пользуясь элементами управления окна редактора, можно изменять масштаб отображения для просмотра мелких деталей на отдельных участках или одновременного обзора всех загруженных карт.

Отдельные объекты, слои и карты можно сделать невидимыми при определённых увеличениях или используя пороги отображения и механизм скрытия слоёв, или путём выключения видимости карт в проекте.

## Управление набором векторных карт – команды меню «Проект»

Команды функционального меню «Проект» используются для создания и редактирования состава набора карт проекта, задания печатных размеров проекта, настройки порогов отображения и печати карт, загруженных в проект, а также для назначения Рабочей папки проекта.

![alt-текст](_assets/menu_project.png "Список команд функционального меню «Проект»")

### Команда «Проект» – «Новый...»

Команда очищает текущий проект от всех векторных и растровых данных и закрывает все дополнительные окна.

### Команда «Проект» – «Бумага...»

Команда открывает диалог с заголовком «Размеры, мм», представленный на рисунке:

![alt-текст](_assets/cmd_project_paper.png "Диалог команды «бумажных» размеров проекта")

Диалог предназначен для задания размера создаваемого проекта в миллиметрах бумажного листа, на котором будут размещаться добавляемые в проект карты (бумажный проект). Причём для карт, добавляемых в бумажный проект, должны быть в паспорте установлены «бумажные размеры» и смещение карты в площади проекта:

![alt-текст](_assets/cmd_map_passport-paper.png "Параметры бумажных размеров проекта в паспорте карты")

После указания размеров и закрытия окна «Размеры, мм» по кнопке «Да» следует открыть необходимые карты и сохранить текущий проект командой «Сохранить как…»

### Команда «Проект» – «Загрузить...»

Загрузка ранее сохранённого проекта. При выборе данной команды появляется стандартный диалог открытия файлов, в списке которого содержатся только файлы с расширением *.PRJ.

### Команда «Проект» – «Сохранить как...»

Сохранение текущего проекта в текстовый файл *.PRJ. Данный файл содержит в себе только сведения о наборе векторных и растровых данных и путей к самим данным, а также параметры отображения данных.

### Команда «Проект» – «Редактировать...» {#anchor8}

Вызывает диалог «Проект». Данный диалог предназначен для управления порядком расположения карт в проекте, добавления карт в проект, удаления карт из проекта, группировки карт, а также для управления видимостью карт.

![alt-текст](_assets/cmd_project_edit.png "Диалог «Проект» команды функционального меню «Проект» – «Редактировать…»")

#### Описание кнопок управления списком карт в проекте

![alt-текст](../_assets/but_mc_add.png) — Добавление карт в проект. При нажатии открывается стандартный диалог открытия файлов, в котором необходимо выбрать требуемые файлы карт и нажать «Открыть». Указанные карты при этом будут добавлены в проект.

![alt-текст](../_assets/but_mc_del.png) — Удаление выделенной в списке карты или папки из проекта. При удалении папки убираются из проекта все карты, которые находились в данной папке.

![alt-текст](../_assets/but_mc_clear.png) — Очистка проекта, аналогично команде «Новый…» из меню «Проект».

![alt-текст](../_assets/but_mc_folder.png) — Функция «Добавить папку». Создаёт в списке виртуальную папку, в которую можно методом «drag-and-drop» поместить карты из списка. Чтобы переместить карту в созданную папку необходимо нажать на название файла карты в списке левой кнопкой мыши и, не отпуская её, перетащить строку на иконку папки, затем отпустить левую кнопку мыши. Для добавления в папку несколько карт одновременно необходимо перед этим создать папку в списке, выделить её и нажать кнопку «Добавить карты» ![alt-текст](../_assets/but_mc_add.png), при этом в диалоге выбора выделить стандартными способами (рамкой выделения или с удержанием клавиш «shift» или «ctrl») несколько файлов карт и нажать «Открыть». Указанные карты будут добавлены в папку проекта. Управление папками происходит так же как со списком карт.

![alt-текст](../_assets/but_mc_mov_down.png) — Переместить карту вниз по списку.

![alt-текст](../_assets/but_mc_mov_up.png) — Переместить карту вверх по списку.

Перемещать карты вниз/вверх по списку можно также методом перетаскивания.

#### Управление порогами видимости карт в проекте

Порог видимости карт применяется в случае, когда необходимо скрывать или отображать карту на определённых уровнях масштабирования. Например, если в проекте загружены несколько карт на одну территорию созданные в разных масштабах, то при этом можно настроить видимость каждой карты, чтоб она отображалось только в заданном масштабном диапазоне, и при разных масштабах изображения включалась видимость карт соответствующего масштабного ряда.

Масштаб отображения измеряется в единицах отношения общего размера проекта к размеру текущего окна редактора. Нулевое значение порога отображения означает, что карта всегда отображается.

{% note info %}

Функция порога видимости карт работает только с конкретным проектом и при условии отключения флагов «Все объекты» и «Все карты» на главной странице диалога «Опции» в настройках программы:

![alt-текст](_assets/options_all_maps.png "Отключение опций «Все объекты» и «Все карты» для задействования функции управления порогами видимости карт проекта")

{% endnote %}

Для задания порогов видимости текущей карты проекта используются поля слева от кнопок управления списком проекта:

![alt-текст](_assets/cmd_project_edit_left_limit.png "Установление порогов видимости для текущей карты проекта")

В данном примере карта будет отображаться только в пределах диапазонов масштабов от 50 000 до 100 000.

Для возможности массового задания порогов видимости картам предусмотрены поля, которые находятся справа от кнопок управления списком проекта:

![alt-текст](_assets/cmd_project_edit_right_limit.png "Установка порогов видимости для всех карт проекта")

Для этого необходимо, перед добавлением карт в проект, установить в этих полях значения масштабов нижнего и верхнего порога отображения, в результате, всем добавляемым картам будут присвоены значения порогов отображения из этих полей.

### Команда «Проект» – «Сохранить...»

В случае, если текущий проект был сохранён ранее, по команде «Сохранить» происходит перезапись ранее сохранённого проекта с текущими параметрами. Если же ранее проект не был сохранён, то происходит сохранение текущего проекта в текстовый файл &#42;.PRJ, аналогично команде «Сохранить как…». Файл &#42;.PRJ не является картой, а содержит в себе только сведения о наборе данных и путей к самим данным.

### Команда «Проект» – «Печатать...»

Вызывает диалог «Печать», где предусмотрены различные варианты вывода изображения текущего проекта на печатающее устройство либо в растровый графический файл. Программа печатает изображение в виде, соответствующем отображению на экране монитора согласно настройкам графики объектов (но не растровый образ экрана). При этом учитывается скрытие слоёв.

Габариты изображения, масштаб, параметры разбивки на страницы, а также настройки качества печати или растрового графического файла устанавливаются в диалоге вывода на печать, представленном на рисунке:

![alt-текст](_assets/cmd_project_print.png "Диалог «Печать» – настройка вывода изображения карт на печатающее устройство и в растровый файл")

Габариты печатаемой области в окне Редактора обозначаются розовой рамкой:

![alt-текст](_assets/cmd_project_print_frame.png "Отображение заданной области печати в окне «Редактор»")

Произвольное перемещение габаритной рамки печатаемой области, а также изменение размеров рамки производится по нажатию кнопки ![alt-текст](../_assets/but_change.png) во вкладке «Печать», при этом курсор в окне Редактора принимает форму маленького перекрестия ![alt-текст](../_assets/cur_cross.png), а при наведении внутрь габаритной рамки форму перекрестия со стрелками ![alt-текст](../_assets/cur_cross-arrow.png). Если в этом режиме нажать и удерживать левую кнопку мыши, то можно перетащить габаритную рамку в другое место окна Редактора карты. Зафиксировать новое положение габаритной рамки можно нажатием правой кнопки мыши или клавиши «Enter» на клавиатуре. Изменение размеров габаритной рамки производится также, как и сдвиг, только курсор необходимо навести не внутрь, а к краю контура габаритной рамки. При наведении на горизонтальную рамку курсор принимает вид ![alt-текст](../_assets/cur_cross_vertikal.png), а при наведении на вертикальную рамку вид ![alt-текст](../_assets/cur_cross_gorizontal.png). Сдвиг габаритной рамки на фиксированный интервал по горизонтали и вертикали осуществляется кнопками ![alt-текст](../_assets/but_mov_all.png), расположенными под окном с изображением печатаемой области в диалоге «Печать».

#### Вывод изображения на печатающее устройство – вкладка «Печать» диалога «Печать»

Вывод изображения на печатающее устройство происходит после нажатия кнопки «OK» в нижней части вкладки «Печать». Перед тем, как вывести изображение на печать, необходимо выбрать печатающее устройство и установить все необходимые параметры вывода:

![alt-текст](_assets/print_device.png "Блок диалога печати «Принтер» из вкладки «Печать»")

+ «Растровый» тип вывода – формирует в памяти растровое изображение с последующим выводом его на печатающее устройство (рекомендуется для любого типа устройства).
+ «Векторный» тип вывода – пересылка данных напрямую на печатающее устройство (только для устройств с поддержкой языка PostScript).

При указании опции «Заполнить страницу» программа вписывает выбранный фрагмент области печати карты в размеры страницы, указанной в настройках принтера, при этом масштаб печати получаемого изображения рассчитывается автоматически:

![alt-текст](_assets/print_scale.png "Блок диалога печати «Масштаб» из вкладки «Печать»")

При установленной опции «Разбить» в разделе «Страницы» – область печати автоматически разбивается на страницы, исходя из настроек размеров бумаги устройства вывода и указанного масштаба печати изображения, при этом появляется возможность указания области печати с помощью следующих кнопок:

![alt-текст](_assets/print_fragment.png "Блок диалога печати «Фрагмент» из вкладки «Печать» – указание области печати")

Разбиение печатаемой области на страницы:

![alt-текст](_assets/print_pages.png "Блок диалога печати «Страницы» из вкладки «Печать» – разбиение печатаемой области на страницы")

#### Вывод изображения в растровый графический файл – вкладка «Растр» диалога «Печать»

Формирование растрового графического файла происходит по нажатию кнопки «OK» внизу диалога вкладки «Растр», при этом открывается диалог «Печатать в файл», где необходимо указать место сохранения и имя для формирования растрового графического файла. В том же диалоге есть возможность выбора расширения для создаваемого файла (&#42;.bmp, &#42;.gif, &#42;.jpg, &#42;.tif). Одновременно с формированием растрового файла к нему создаётся файл географической привязки &#42;.&#64;&#64;&#64; с аналогичным именем.

![alt-текст](_assets/print_rastr.png "Настройки вывода изображения в растровый графический файл")

Опция «Разбить» во вкладке «Растр» работает так же, как при выводе изображения на принтер из вкладки «Печать», только при нажатии кнопки «OK», после указания в диалоге «Печатать в файл» места для сохранения, имени и расширения выходного файла, будут сформированы несколько растровых графических файлов в соответствии с полученным количеством страниц и указанных номеров диапазона вывода. К каждому имени файла в конце приписывается номер страницы и формируется географическая привязка &#42;.&#64;&#64;&#64; с аналогичным именем.

#### Дополнительные настройки печати – вкладка «Опции» диалога «Печать»

Вкладка «Опции» содержит общие настройки, как для печати изображения, так и для формирования растрового графического файла

![alt-текст](_assets/print_optons.png "Вкладка «Опции» ­ дополнительные параметры печати")

В данном разделе можно задать размеры перекрытия для страниц в случае многостраничной печати. Размеры перекрытия устанавливаются в процентах относительно размеров страницы по ширине и высоте соответственно.

### Команда «Проект» – «Рабочая папка...»

Вызывает диалог, в котором можно указать рабочую папку. Необходимость в использовании рабочих папок возникает в случае, когда на одном компьютере для одного ПК «ГИС Нева» необходимо разделить работы над картами различных классификаторов по различным технологиям.

По умолчанию в качестве рабочей папки устанавливается каталог размещения программного комплекса «Нева», а при указании в качестве рабочей папки иного каталога, из каталога размещения программного комплекса «Нева» используются только программы, размещенные в папке «bin», остальные модули и настройки задействуются из каталога, указанного в команде «Рабочая папка…»

Подробнее о Рабочей папке можно прочитать в первой части данного руководства в разделе [«Правила размещения на компьютере»
](../part1/allinfo.md#anchor1)

### Команда «Проект» – «Выход»

Выход из программы с сохранением всех текущих изменений. Данная команда работает так же, как закрытие главного окна программы или нажатие горячих клавиш Alt+X на клавиатуре.

## Управление набором пространственных данных – окно «Проект»

Многостраничное окно «Проект» предназначено для загрузки и выгрузки данных, а также для управления данными проекта – включение и отключение видимости, получение информации о данных, управление взаимным расположением данных и прочее. Горячая клавиша для вызова окна F2.

![alt-текст](_assets/win_prj_vector_clear.png "Окно управления набором пространственных данных «Проект»")

Окно «Проект» состоит из нескольких страниц:
+ Вектор – работа в проекте с форматами данных &#42;.DM, &#42;.TDM, &#42;.SXF, &#42;.TIN, &#42;.RD, &#42;.XXX;
+ Рельеф – работа в проекте с форматами данных &#42;.RLZ, &#42;.REL, &#42;.TIF, &#42;.TIN;
+ Фотоплан – работа в проекте с форматами данных &#42;.JPG, &#42;.TIF, &#42;.BMP, &#42;.SID, &#42;.ECW, &#42;.KML, &#42;.KMZ;
+ Растр – работа в проекте с форматами &#42;.TIF, &#42;.JPG, &#42;.BMP, &#42;.SID, &#42;.ECW, &#42;.RLZ, &#42;.PNG, &#42;.GIF, &#42;.PCX, &#42;.RSW, &#42;.FOT, &#42;.FFT, &#42;.TXT, &#42;.XML, &#42;.TIFF;
+ Интернет – управление загрузкой и отображением растровой графики с различных интернет ресурсов;
+ Треки – работа в проекте с GPS-треками форматов &#42;.LOG, &#42;.TXT, &#42;.DAT, &#42;.LX1, &#42;.RT.

Каждая страница имеет табличную структуру представления данных, кроме страницы «Интернет», которая содержит 2 колонки иерархического списка интернет ресурсов.

Нажатие правой кнопки мыши на строке списка данных на страницах «Вектор» или «Фотоплан» вызывает команду ![alt-текст](_assets/cmd_show_map.png), которая предъявляет, соответственно, выделенную карту или растр в окне Редактора.

Описание функции общих кнопок верхней панели окна проект:

![alt-текст](../_assets/but_mc_open.png) — «Открыть» – предназначена для открытия данных в проекте, как нового набора данных. При открытии новых данных, ранее добавленные в проект данные, отображаемые в списке текущей страницы, удаляются из проекта;
![alt-текст](../_assets/but_mc_add.png) — «Добавить» – предназначена для добавления данных в проект без удаления ранее загруженных данных, которые отображаются в списке текущей страницы;
![alt-текст](../_assets/but_mc_del.png) — «Удалить» – предназначена для удаления данных, выделенных в списке текущей страницы;
![alt-текст](../_assets/but_mc_clear.png) — «Очистить» – предназначена для удаления из проекта данных, отображаемых на текущей странице;
![alt-текст](../_assets/but_mc_mov_down.png) — «Вниз» – перемещение выделенной строки вниз по списку (выше по уровню положения относительно других данных текущей страницы);
![alt-текст](../_assets/but_mc_mov_up.png) — «Вверх» – перемещение выделенной строки вверх по списку (ниже по уровню положения относительно других данных текущей страницы);
![alt-текст](../_assets/but_mc_info.png) — «Информация» – предназначена для получения дополнительной информации о данных выделенной строки списка текущей страницы.

### Страница «Вектор» окна «Проект»

Страница «Вектор» предназначена для управления набором векторных карт проекта:

![alt-текст](_assets/win_prj_vector.png "Пример отображения загруженных векторных карт в окне «Проект»")

Назначение полей страницы «Вектор» окна «Проект»:

| **Имя<br>столбца** | **Описание**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|:--------------:|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| а              | Крестик напротив карты обозначает, что данная карта активная. Чтобы сделать активной другую карту необходимо дважды кликнуть левой кнопкой мыши в данном столбце напротив нужной карты.                                                                                                                                                                                                                                                                                                                                                     |
| v              | Крестик напротив поля обозначает, что видимость карты включена (двойной клик левой кнопкой мыши в данном поле включает и отключает отображение карты). Нажатие на кнопке с заголовком столбца вызывает контекстное меню управления видимостью всех карт, загруженных в проект:<br> ![alt-текст](_assets/win_prj_vector_menu_v.png "Команды контекстного меню поля «v»")                                                                                                                                                                                                                         |
| name           | Название файла векторных данных                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| scale1         | Нижний масштаб отображения, после которого видимость карты отключается. При нажатии на кнопку с заголовком столбца ![alt-текст](../_assets/but_scale1.png) открывается диалог «Масштаб отображения», в котором можно назначить пороги видимости для текущей карты списка проекта:<br> ![alt-текст](_assets/scale_dialog.png "Диалог настройки порогов видимости карты проекта для нижнего масштаба отображения (scale1)")<br>Описание принципов работы порогов отображения в разделе [«Проект» – «Редактировать…»](#anchor8)  |
| scale2         | Верхний масштаб отображения, после которого видимость карты отключается. При нажатии на кнопку с заголовком столбца ![alt-текст](../_assets/but_scale2.png) открывается диалог «Масштаб отображения», в котором можно назначить пороги видимости для текущей карты списка проекта:<br> ![alt-текст](_assets/scale_dialog.png "Диалог настройки порогов видимости карты проекта для нижнего масштаба отображения (scale2)")<br>Описание принципов работы порогов отображения в разделе [«Проект» – «Редактировать…»](#anchor8) |
| xmin           | Координата нижней точки рамки карты                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| xmax           | Координата верхней точки рамки карты                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ymin           | Координата левой точки рамки карты                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| ymax           | Координата правой точки рамки карты                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |


Кнопка ![alt-текст](../_assets/but_mc_info.png) вызывает диалог «Паспорт карты» соответствующий файлу текущей строки списка карт проекта.

{% note info %}

Двойной клик по названию файла в поле «name»  заключает название в квадратные скобки, что указывает на использование данной карты в качестве основы при формировании фотоплана (сшивки снимков) по команде функционального меню «Растр» – «Фотоплан» – «Новый…» – «текущий проект». В карте должны быть отбиты участки сшивки площадными объектами с заполненными параметрами смешивания растров, при этом код объекта обозначающего границу полигона сшивки не важен.

Характеристики по которым происходит процедура смешивания изображений следующие:
+ «9 string» – имя растрового изображения;
+ «10 byte» – параметр «alfa» (прозрачность, всегда равна 100);
+ «11 single» – параметр «radius» (ширина перехода смешивания растров в метрах, рекомендуется 15 м);
+ «12 byte» – параметр «blend» (2 - смешивание цвета по границе растров; 1 – смешивание по всей площади наложения растров).

Подробное описание технологии сшивки фотоплана в описании команды функционального меню «Растр» – «Фотоплан» – «Новый...» в разделе «Операции над растровыми изображениями».

{% endnote %}

### Страница «Рельеф» окна «Проект»

Страница «Рельеф» предназначена для управления набором данных рельефа местности:

![alt-текст](_assets/win_prj_relief.png "Пример отображения загруженных файлов рельефа в окне «Проект»")

Назначение полей страницы «Рельеф» окна «Проект»:

| **Имя<br>столбца** | **Описание**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|:--------------:|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| а              | Крестик напротив имени файла рельефа обозначает, что данный рельеф активный. Чтобы сделать активным другой файл рельефа необходимо дважды кликнуть левой кнопкой мыши в данном столбце напротив имени нужного файла                                                                                                                                                                                                                                                                                                                                                     |
| v              | Крестик напротив поля обозначает, что видимость файла рельефа включена (двойной клик левой кнопкой мыши в данном поле включает и отключает отображение рельефа). Нажатие на кнопке с заголовком столбца вызывает контекстное меню управления видимостью всех файлов рельефа, загруженных в проект:<br> ![alt-текст](_assets/win_prj_vector_menu_v.png "Команды контекстного меню поля «v»")                                                                                                                                                                                                                         |
| e           | Признак разрешения редактирования файла рельефа                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| s           | Признак разрешения выбора рельефа                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| name           | Название файла рельефа                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| color         | Цвет линий профиля рельефа, отображаемых в окне «Профиль» (назначить цвет можно дважды кликнув по полю «color» напротив нужного файла рельефа) |
| xmin           | Координата нижней точки рамки модели рельефа                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| xmax           | Координата верхней точки рамки модели рельефа                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ymin           | Координата левой точки рамки модели рельефа                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| ymax           | Координата правой точки рамки модели рельефа                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |

Кнопка ![alt-текст](../_assets/but_mc_info.png) вызывает окно с дополнительной информацией «Рельеф» к файлу текущей строки списка страницы «Рельеф»:

![alt-текст](_assets/win_prj_relief_info.png "Информация о файле рельефа")

### Страница «Фотоплан» окна «Проект»

Страница «Фотоплан» предназначена для управления набором растровых данных:

![alt-текст](_assets/win_prj_photoplan.png "Пример отображения загруженных растровых данных в окне «Проект»")

Назначение полей страницы «Фотоплан» окна «Проект»:

| **Имя<br>столбца** | **Описание**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|:--------------:|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| v              | Крестик напротив поля обозначает, что видимость растрового файла включена (двойной клик левой кнопкой мыши в данном поле включает и отключает отображение соответствующего растрового изображения). Нажатие на кнопке с заголовком столбца вызывает контекстное меню управления видимостью всех файлов фотоплана, загруженных в проект:<br> ![alt-текст](_assets/win_prj_vector_menu_v.png "Команды контекстного меню поля «v»")                                                                                                                                                                                                                         |
| name           | Название файла растровых данных                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| color           | Цвет для бинарных растров (двойной клик на поле вызывает диалог палитры, в котором можно назначить цвет растра)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| scale1         | Нижний масштаб отображения, после которого видимость файла в окне Редактора отключается. При нажатии на кнопку с заголовком столбца ![alt-текст](../_assets/but_scale1.png) открывается диалог «Масштаб отображения», в котором можно назначить пороги видимости для данного растрового изображения:<br> ![alt-текст](_assets/scale_dialog.png "Диалог настройки порогов видимости растра для нижнего масштаба отображения (scale1)")<br>Описание принципов работы порогов отображения в разделе [«Проект» – «Редактировать…»](#anchor8)  |
| scale2         | Верхний масштаб отображения, после которого видимость файла в окне Редактора отключается. При нажатии на кнопку с заголовком столбца ![alt-текст](../_assets/but_scale2.png) открывается диалог «Масштаб отображения», в котором можно назначить пороги видимости для данного растрового изображения:<br> ![alt-текст](_assets/scale_dialog.png "Диалог настройки порогов видимости карты проекта для нижнего масштаба отображения (scale2)")<br>Описание принципов работы порогов отображения в разделе [«Проект» – «Редактировать…»](#anchor8)|
| xmin           | Координата нижней точки рамки растра                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| xmax           | Координата верхней точки рамки растра                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ymin           | Координата левой точки рамки растра                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| ymax           | Координата правой точки рамки растра                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |


Кнопка ![alt-текст](../_assets/but_mc_info.png) вызывает окно с информацией о растровом файле текущей строки списка растров проекта:

![alt-текст](_assets/win_prj_photoplan_info.png "Информация о растровом файле")

### Страница «Растр» окна «Проект»

В ПК «ГИС Нева» совмещённое с картой растровое изображение, которое было открыто как «Растр», может быть только одно, в отличие от открытия растровых изображений, открываемых как «Фотоплан», где изображения подкладываются под карту в виде мозаики. Если после совмещения растра и карты открыть второе растровое изображение, имеющее географическую привязку, то оно заменит собой первое, вытеснив его в отдельное окно. Нажатием горячей клавиши F можно менять местами эти изображения, при этом в поле «name», будет отображаться название растра, совмещённого с картой:

![alt-текст](_assets/win_prj_rastr.png "Пример отображения открытого в проекте растрового изображения на странице «Растр» окна «Проект»")

Кнопка ![alt-текст](../_assets/but_mc_info.png) вызывает окно с информацией о растровом файле текущей строки списка растров проекта:

![alt-текст](_assets/win_prj_rastr_info.png "Информация о растровом файле")

### Страница «Интернет» окна «Проект»

Страница проекта «Интернет» предназначена для управления растровой подложкой картографических сервисов, получаемой из различных внешних интернет ресурсов по стандартному протоколу «Web Map Servise» (WMS) и отображаемых в окне с картой «Редактор». Список доступных ресурсов зависит от версии ПК «ГИС Нева». Данная страница дублирует основные команды управления интернет ресурсами из функционального меню «Растр» – «Интернет\>»:

![alt-текст](_assets/win_prj_web.png "Управление загрузкой данных из сети интернет в окне «Проект»")

Рассмотрим в качестве примера загрузки в окно «Редактор» подложки «Спутник» сервиса «Google Карты» и слоя «Гибрид» сервиса «Яндекс.Карты» – интернет уровень отображения 12:

![alt-текст](_assets/win_prj_web_setup.png "Окно «Проект» – установки для отображения сервисов")

Ниже показан результат установленных настроек загрузки интернет ресурсов, отображаемый в окне «Редактор»:

![alt-текст](_assets/win_prj_web_gibrid.png "Окно «Редактор» – отображение загруженных данных из сети интернет")

Условия для использования подложки интернет ресурсов:
+ Выход в сеть интернет;
+ Назначена папка КЭШа для загружаемых файлов;
+ Указан уровень отображения интернет ресурса;
+ Опция «Вкл./Откл. интернет» активна.

Для возможности подгонки подложки интернет ресурса под карту предусмотрены кнопки смещения:

![alt-текст](../_assets/but_mov_web_rastr.png) — произвольное смещение интернет-подложки относительно координат карты. При нажатии курсор в окне Редактора принимает следующую форму ![alt-текст](../_assets/cur_mov_point_rastr.png), после чего на карте необходимо двумя точками указать вектор смещения.
![alt-текст](../_assets/but_mov_web_rastr_cancel.png) — отмена смещения интернет-подложки.

### Страница «Треки» окна «Проект»

Страница проекта «Треки» предназначена для управления просмотром файлов треков форматов &#42;.LOG, &#42;.TXT, &#42;.DAT, &#42;.LX1 , &#42;.RT без конвертации данных в формат DM. Для просмотра треков наличие карты в проекте не обязательно.

![alt-текст](_assets/win_prj_tracks.png "Пример отображения загруженных GPS-треков в окне «Проект»")

Назначение полей страницы «Треки» окна «Проект»:

| **Имя<br>столбца** | **Описание** |
|:------------------:|--------------|
| v              | Крестик напротив поля обозначает, что видимость файла включена (двойной клик левой кнопкой мыши в данном поле включает и отключает отображение соответствующего трека). Нажатие на кнопке с заголовком столбца вызывает контекстное меню управления видимостью всех треков, загруженных в проект:<br> ![alt-текст](_assets/win_prj_vector_menu_v.png "Команды контекстного меню поля «v»") |
| name           | Название файла трека |
| color           | Цвет трека и пиктограммы на карте в виде треугольника, обозначающей начало линии |
| start         | Время начала записи трека |
| duration         | Продолжительность записи трека |

Ниже показан пример отображения GPS-треков поверх карты в окне  «Редактор»:

![alt-текст](_assets/win_prj_tracks_map.png "Отображение треков в окне «Редактор» на фоне карты")

## Навигация по карте – Окно «Обзор»

В программе есть возможность одновременно просматривать фрагмент карты в окне Редактора и отслеживать его положение относительно всего проекта. Для этого следует открыть окно обзора по команде «Окна» – «Обзор» или горячими клавишами Ctrl+F2. В этом окне программа выводит все карты, как и в окне редактора, а также отображает контур фрагмента, видимого в окне редактора.

Окно «Обзор» предназначено для отображения на более мелком масштабе положения фрагмента карты или набора карт текущего проекта, видимого на экране в окне «Редактор», а также для быстрой навигации по карте в окне «Редактор» с помощью указания требуемого фрагмента в окне «Обзор»:

![alt-текст](_assets/win_review.png "Работа с окнами «Обзор» и «Редактор»")

Вид окна «Обзор» такой же, как у окна «Редактор», только без координатной строки. Функции увеличения и уменьшения масштаба, а также сдвига карты внутри окна действуют аналогично окну «Редактор». Розовая рамка обозначает габариты фрагмента карты, отображаемого в окне «Редактор». Если кликнуть правой кнопкой мыши в окне «Обзор», то данная точка становится новым центром окна карты в Редакторе, соответственно габаритная рамка в окне «Обзор» центрируется по указанной точке. При клике левой кнопкой мыши в окне «Обзор» можно указать новые габариты фрагмента карты, тогда в окне «Редактор» карта отобразится в пределах указанной области.

## Увеличение фрагмента карты – окно «Лупа»

Окно «Лупа» отображает увеличенное изображение фрагмента окна «Редактор», который находится под курсором. На примере, приедённым ниже, слева находится карта в окне Редактора, а справа увеличенное изображение этой карты в окне «Лупа»:

![alt-текст](_assets/win_zoom.png "Работа с окнами «Лупа» и «Редактор»")

## Закладки для изображений

Окно «Закладки» предназначено для запоминания фрагментов положения карты в окне «Редактор» и возврата карты в это положение. Вызов окна «Закладки» можно осуществлять горячей клавишей F3 или командой функционального меню «Окна» – «Закладки». Под фрагментами понимаются значения координат центра окна отображения и масштаб отображения.

![alt-текст](_assets/win_bookmarks.png "Работа с окном «Закладки»")

Назначение кнопок окна «Закладки»:

![alt-текст](../_assets/but_mc_add_big.png) — добавление нового фрагмента в список закладок;
![alt-текст](../_assets/but_mc_del_big.png) — удаление текущего фрагмента из списка закладок;
![alt-текст](../_assets/but_mc_clear_big.png) — очистка списка закладок;
![alt-текст](../_assets/but_present.png) — предъявление текущего фрагмента списка в окне «Редактор»;
![alt-текст](../_assets/but_open_win_right.png) — открытие окна показа расположения фрагмента относительно габаритов проекта.
 
Для сохранения закладок во внешнем файле с расширением &#42;.VPT или загрузки ранее сохранённых закладок, необходимо нажать на первую слева кнопку заголовка таблицы и выбрать соответствующую команду, как представлено на рисунке:

![alt-текст](_assets/win_bookmarks_save.png "Окно «Закладки» – сохранение и загрузка списка закладок")

В программе также предусмотрена возможность быстрого запоминания фрагмента и возвращения к нему, не используя диалог «Закладки», с помощью горячих клавиш:
+ Shift+X – запомнить текущий фрагмент;
+ X – возврат к фрагменту.

## Настройки параметров отображения

Для настройки параметров изображения можно использовать следующие операции:
+ редактирование общих опций отображения – выполняется на странице «Главная» в диалоге «Опции», который открывается командой «Настройка» – «Опции…» или горячей клавишей F8;
+ установка параметров отображения объектов в соответствие с классификатором – выполняется по команде функционального меню «Разное» – «Восстановить графику». Используется после изменения условных знаков объектов в классификаторе или изменения параметров отображения отдельных объектов, т.к. некоторые характеристики условных знаков хранятся вместе с объектами в карте;
+ изменение фона отображения карты – выполняется по команде функционального меню «Настройка» – «Подложка…»;
+ изменение стиля графики контура выделения активного объекта и объектов, занесённых в выборку – выполняется по команде функционального меню «Настройка» – «Объекты…»;
+ настройка порогов отображения – выполняется:
    + в диалоге «Проект» по команде «Проект» – «Редактировать...» или в окне «Проект» команды «Окна» – «Проект» – для карт;
    + в окне «Слои» – для слоёв;
    + с помощью инструмента  «Изменить порог отображения объекта» ![alt-текст](../_assets/tool_view.png) – для отдельных объектов и видов объектов;
+ установка видимости и скрытие слоёв – выполняется в окне «Слои».

### Настройка общих опций отображения – страница «Главная» диалога «Опции»

Диалог «Опции», представленный на рисунке ниже, открывается горячей клавишей F8 или командой функционального меню «Настройка» – «Опции…»:

![alt-текст](_assets/setting_options_main.png "Диалог «Опции» – настройка основных параметров отображения")

Опции блока «Отображение»:
+ Заливка областей – включение/отключение заливки полигональных объектов и векторных знаков (горячая клавиша O);
+ Заливка текстов – включение/отключение заливки подписей;
+ Тонкая линия – отображение контуров всех объектов в виде тонкой линии (горячие клавиши Shift+S).
+ Атрибуты – включение/отключение отображения семантики объектов в виде виртуальных подписей, согласно настройкам из классификатора (горячие клавиши Shift+A);
+ Дочерние объекты – при выключенной опции не отображаются дочерние объекты, если их родительские объекты находятся за пределами области окна карты;
+ Цепочно-узловая структура – включение/отключение отображения узлов и рёбер объектов в цепочно-узловой структуре хранения данных, а также редактирование объектов цепочно-узловой структуры;
+ Все объекты – активная опция означает, что объекты отображаются вне зависимости от уровней отображения, приписанных карте в проекте, уровней отображения, приписанных слоям в карте, и уровня отображения, приписанного объектам. При выключенной опции отключается видимость небольших по метрике объектов, а также видимость контуров у небольших площадных объектов при уменьшении изображения карты, также учитываются пороги видимости объектов, пороги видимости карт и слоёв карт. Отключение опции рекомендуется использовать при работе с большими массивами векторных данных на слабых рабочих станциях или при использовании порогов видимости для управления видом изображения карт при масштабировании;
+ Все карты – используется при работе с несколькими картами в проекте. Активная опция означает:
    1. При клике в окне карты с целью выбора объекта, в случае не попадания курсором в объект, программа делает активной следующую карту, находящуюся ниже по списку и ищет объект в следующей карте (автоматическое переключение активности карт при выборе объектов);
    1. Выполнение некоторых команд функционального меню или операций из набора специальных программ Выборки будут выполняться со всеми картами текущего проекта. Например, команды функционального меню «Разное» – «Восстановить графику» или «Разное» – «Упорядочить по слоям»;
+ Рамка листа – включение/отключение отображения рамки листа карты;
+ Рамка растра – включение/отключение отображения габаритной рамки растрового изображения в окне Редактора карты при открытии растра как «Фотоплан»;
+ Сетка – включение/отключение отображения виртуальной километровой или градусной сетки. Параметры сетки устанавливаются в паспорте карты на странице «Разное»;
+ Маркировать точки, радиус \[+\] – включение/отключение видимости точек метрики объектов. В выпадающем списке справа от опции  можно задать размер точек в пикселах от 1 до 7. В окне Редактора можно включать и отключать максимальный размер маркировки точек горячей клавишей «{». После использования горячей клавиши необходима перерисовка окна. При выделении точек метрики первая точка выделяется бо́льшим размером относительно остальных точек. Метрика подписей и точечных объектов дополнительно выделяется чёрной тонкой линией;
+ Маркировать точки по направлению – при включенной опции точки метрики объектов маркируются треугольными стрелками, обозначающие направление метрики объекта;
+ Подчеркивать активный знак – включение/отключение дополнительного выделения активного знака контуром в виде круга диаметром 32 пиксела.
+ Подчеркивать текст – включение/отключение оконтуривания подписей. Справа от данной опции находится числовое поле ![alt-текст](_assets/box_param.png), в котором задаётся номер цвета контура из первых двух рядов палитры от 0 до 15:

![alt-текст](_assets/palitra_mumbers.png "Основные цвета и служебные номера палитры")

+ Разводить текст – включение/отключение режима автоматического размещения подписей отображаемых атрибутов с учётом их взаимного расположения.

Опции блока «Выбор объекта»:
+ Подтверждение – активная опция означает, что при указании объекта для осуществления какой-либо функции следует ещё раз выбрать объект;
+ ![alt-текст](_assets/box_selections1.png) – выделение объекта происходит при указании в любом месте объекта (внутри контура, по контуру, при указании точки объекта);
+ ![alt-текст](_assets/box_selections2.png) – выделение объекта происходит только при указании контура или точки метрики объекта;
+ ![alt-текст](_assets/box_selections3.png) – выделение объекта происходит только при указании точки метрики объекта.

Опции блока «Формат»:

+ Углы – опция отображения формата координат широты и долготы в координатной строке окна Редактора карты, а также в диалоге ввода координат и в окне Инспектора карты:
    + Градусы, минуты, секунды;
    + Градусы, минуты;
    + Доли градуса.

Опции блока «Интерфейс»:

+ \<dos\> интерфейс – активная опция означает, что при указании прямоугольного фрагмента во всех операциях будет использоваться способ в стиле «DOS», иначе – стиль «Windows».<br>
При использовании стиля «Windows» для указания прямоугольника необходимо нажать левую кнопку мыши и, не отпуская её, перетаскивать курсор. При этом происходит растягивание прямоугольника. После достижения необходимого размера следует отпустить кнопку для фиксации прямоугольника.<br>
При использовании стиля «DOS» для указания прямоугольника необходимо щёлкнуть левой кнопкой мыши в месте расположения первого угла, а затем передвигать курсор при отпущенной кнопке. При этом происходит растягивание прямоугольника. После достижения необходимого размера следует щёлкнуть либо левой кнопкой мыши для фиксации прямоугольника, либо правой – для отмены операции.
+ \<xor\> интерфейс – активная опция означает, что при создании объекта «резиновая нить» объектов будет иметь одинаковый серый цвет от начальной точки метрики до точки положения курсора. Если опция отключена, то «резиновые нити» объектов от последней зафиксированной точки до точки положения курсора будут иметь чёрный цвет, а отрезки зафиксированной метрики будут иметь цвет, который назначен активному объекту в диалоге команды функционального меню «Настройка» – «Объекты…».

### Настройка фоновой подложки окна «Редактор»

Для изменения фона окна Редактора используется диалог команды «Настройка» – «Подложка…» в котором можно назначить фоновый цвет:

![alt-текст](_assets/setting_background.png "Диалог «Подложка» – указание цвета фона окна «Редактор»")

Палитру можно редактировать, нажав на кнопку «Палитра». При этом появится диалог редактирования палитры. Для сохранения нового цвета подложки следует нажать кнопку «OK» либо клавишу «Enter». Для завершения диалога без сохранения изменений следует нажать кнопку «Отмена» или клавишу «Esc».

### Настройка пользовательской палитры

Команда «Настройка» – «Палитра…» предназначена для редактирования палитры отображения карты. После выбора данной команды появляется диалог редактирования палитры:

![alt-текст](_assets/setting_palitra.png "Диалог «Палитра»")

Цвета объектов карты задаются в виде индексов в 32-цветной палитре. Данный диалог позволяет настроить RGB-CMYK значения цветов в этой палитре. Для изменения цвета в палитре следует выбрать соответствующую ячейку отображающую цвет с определенным индексом. При этом в полях палитры RGB (красный, зелёный, синий) будет выведено разложение текущего цвета, а окно цвета закрасится соответствующим цветом. Значения разложения можно изменить. При этом окно цвета меняет окраску, и отображает цвет с заданными RGB-значениями. При изменении цвета в ячейке палитры, меняется цвет у всех объектов карты, графика которых привязана к данной ячейке палитры.

Все изменения синхронно отображаются в палитре программы. После завершения редактирования палитры следует нажать кнопку «Закрыть».

Текущую палитру можно сохранить в файле, для использования в следующих сеансах редактирования, нажав на кнопку «Сохранить». После нажатия на эту кнопку появится стандартный диалог сохранения файлов с заголовком «Сохранить Палитру Как». Палитра сохраняется в файле с расширением &#42;.RGB. В диалоге следует задать имя файла и нажать кнопку «Сохранить».

Кнопка «Загрузить» предназначена для загрузки ранее сохраненной палитры. После нажатия на эту кнопку появится стандартный диалог загрузки файлов с заголовком «Загрузить Палитру». В списке содержатся файлы палитры с расширением &#42;.RGB. В диалоге следует задать имя файла и нажать кнопку «Открыть». Текущая палитра будет заменена на палитру из указанного файла.

Текущая палитра хранится в файле DMW.RGB.

Данный диалог может быть вызван при выполнении большинства команд, связанных с выбором цвета.

### Отображение номенклатурной сетки

Команда «Настройка» – «Бланковка…» предназначена для включения в окне Редактора карты виртуальной разграфки номенклатурных листов указанного масштаба. Масштаб задаётся в окне «Бланковка», которое появляется при выборе команды:

![alt-текст](_assets/setting_blankovka.png "Указание масштаба для отображения виртуальной номенклатурной сетки (бланковки)")

Результат применения команды «Бланковка» – сетка с названиями номенклатурных листов указанного масштабного ряда:

![alt-текст](_assets/setting_blankovka_map.png "Отображение Бланковки в окне Редактора карты")

Для отключения Бланковки необходимо установить значение масштаба «0»

### Настройки стилей отображения активного объекта и выбранного объекта, прозрачность объектов

Настроить стиль отображения активного и выбранного объекта можно в диалоге «Объекты», который вызывается командой функционального меню «Настройка» – «Объекты…». В данном диалоге настраиваются пользовательские параметры графики контура активного объекта и контуров объектов выборки:

![alt-текст](_assets/setting_objects.png "Настройки отображения контуров выделяемых объектов – диалог «Объекты»")

Параметры диалога «Объекты»:

+ Активный объект карты – объект, выбранный в данный момент в окне «Редактор» или окне «Просмотр» для просмотра или редактирования. Выделяется при помощи контура специального цвета и обозначения положения всех точек его метрики; 
+ Выбранные объекты – объекты, включённые в состав выборки для просмотра или групповой обработки. Формирование выборки осуществляется вручную специальными операциями редактирования или автоматически на основании настроенного специального фильтра;
+ Второй объект – объект, связанный заданным условием отношения с текущим объектом предъявляемым в парной выборке;
+ Область пересечения – область пересечения объектов парной выборки по условию «пересечение»;
+ Узлы, рёбра – объекты карт цепочно-узловой структуры;
+ Сетка – координатная сетка, включение и выключение которой указываются на странице «Главная» в диалоге «Опции», а параметры сетки задаются в паспорте карты на странице «Разное» для каждой карты индивидуально.
+ Дочерние объекты – объекты карты, являющиеся подчинёнными к основному объекту (родителю)

Параметр «Прозрачность» включает прозрачность всех векторных объектов карты при совмещении карты с любой растровой подложкой, степень прозрачности задаётся от 0 до 100%.

Для более заметного выделения объекта можно дополнительно задать обводку контура (ореол) в диалоге главного меню «Настройка» – «Толщина ореола…». Толщина ореола указывается в миллиметрах в масштабе карты:

![alt-текст](_assets/setting_selection_object.png "Настройка толщины ореола активного объекта")

## Контекстное меню работы с активным объектом

В режиме выбора объекта при клике правой кнопкой мыши в области окна редактора появляется контекстное меню с перечислением допустимых операций с объектом карты

![alt-текст](_assets/context_menu_activ.png "Контекстное меню при работе с активным объектом")

+ Следующий – переход к следующему объекту под курсором (горячая клавиша N);
+ Предъявить – при наведении  курсора на строку  «Предъявить» появляется дополнительное меню в котором можно выбрать ряд вариантов операций по предъявлению:
    + Объект – предъявляет весь объект, причём масштаб изображения выбирается таким образом, чтобы в окне редактора карты был виден весь объект;
    + Первую точку – предъявляет первую точку объекта;
    + Последнюю точку – предъявляет последнюю точку объекта;
    + Крайние точки – предъявляет первую и последнюю точку объекта, причём масштаб изображения выбирается таким образом, чтобы в окне редактора карты были видны обе крайние точки объекта;
    + Самопересечение – предъявляет место самопересечения объекта;
    + Самопримыкание – предъявляет место самопримыкания объекта;
    + Согласование – выделяет зелёными маркерами участок метрики согласованный с соседним объектом;
    + 2 объект – после выбора команды необходимо указать второй объект для вызова окна сравнения атрибутов первого и второго объектов;
    + Связь… – открывает окно со списком связей объекта с другими объектами карты при их наличии;
    + Семантику по связи… – открывает бланк семантики объекта, связанного с выделенным в карте объектом, в случае наличия нескольких связей у выделенного объекта выводится окно со списком связей, где требуется указать нужную связь, семантику которой требуется показать;
    + Коллекцию – предъявляет в окне «Проводник» коллекцию, в состав которой входит указанный объект.
 + Добавить в выборку – включает в выборку активный объект;
 + Семантика – вызывает бланк семантики активного объекта, аналогично инструменту «Редактировать семантику объекта» ![alt-текст](../_assets/tool_info.png) из группы «Объект» панели инструментов;
 + Удалить – удаляет активный объект, аналогично инструменту «Удалить объект» ![alt-текст](../_assets/tool_del.png) из группы «Объект» панели инструментов;
 + Удалить+дырка – удаляет активный объект, аналогично инструменту «Удалить объект» ![alt-текст](../_assets/tool_del.png) из группы «Объект» панели инструментов, но при удалении площадного объекта дублирующего внутренний контур удаляется внутренний контур, в котором находится удаляемый объект;
 + Переместить – перемещает объект аналогично инструменту «Переместить объект» ![alt-текст](../_assets/tool_move.png) из группы «Объект» панели инструментов;
 + Текстовая сноска – ставит подпись к объекту по шаблону, аналог функции кнопки ![alt-текст](../_assets/but_abc.png) из бланка семантики (работает только на тех объектах, к которым есть описание шаблона подписей);
 + + связь – установить связь активного объекта с другим объектом карты, при наличии описания связи этих объектов в классификаторе. После выбора команды необходимо указать объекты карты, с которыми нужно установить связь, если у объектов нет взаимной связи. Если у активного объекта уже имеются связи с другими объектами карты, то такие объекты выделяются контуром голубого цвета.
 + -связь – разрушить связь активного объекта с другим объектом карты;
 + Метаданные – команда появляется в контекстном меню только при наличии в рабочей папке программы классификатора «metadata.obj». При наведении  курсора на строку «Метаданные» появляется дополнительное меню со следующими командами:
    + Объект – заполнение метаданных объекта;
    + Метрика – заполнение метаданных метрики объекта;
 + +метрика – добавление дополнительного координатного описания к существующему «базовому» объекту, при этом объекты, являющиеся дополнительными, наследуют все атрибуты своего «базового» объекта.
 + Проводник – предъявление выделенного объекта в инфодереве окна «Проводник»;
 + Копировать – копирует в буфер активный объект;
 + Вырезать – копирует в буфер активный объект, удаляя его при этом из карты;
 + Вставить – вставляет в карту объект из буфера.  Данная команда является доступной, только если в буфере находится объект. После вставки объекта программа переходит в режим перемещения объекта, а после нажатия на правую кнопку мыши – в режим поворота, аналогично инструменту «Повернуть объект» ![alt-текст](../_assets/tool_rotate.png) из группы «Разное» панели инструментов. Для фиксации положения объекта надо дважды нажать правую кнопку мыши;
 + Заменить – заменяет метрику активного объекта метрикой объекта из буфера, при этом сохраняется вся семантика заменяемого объекта;
 + Выбрать в меню – переход в Легенде карты на код активного объекта, при этом окно Легенды открывается автоматически, если до этого оно было закрыто;
 + Графика… – вызывает диалог редактирования графики объекта, аналогично инструменту «Изменить графику объекта» ![alt-текст](../_assets/tool_color.png) из группы «Объект» панели инструментов;
 + Разрезать в проекте – разрезает по рамке карты объект, выходящий за пределы рамки, перенося при этом отрезанную выходящую часть на смежную карту, открытую в проекте, на которую данный объект попадает;
 + Найти первый – вызывает диалог поиска объекта, в котором после указания необходимых параметров и нажатии кнопки «Первый» в диалоге поиска или клавиши «Enter» на клавиатуре происходит переход на карте к первому объекту, удовлетворяющему условию поиска. В случае, когда необходимо искать объект только по номеру и значению характеристики, независимо от кода и типа, в поле «Код» ставится значение «00000000», а в поле «Тип» значение «Меню»:

![alt-текст](_assets/searh_first.png "Диалог поиска объекта в текущей карте")

 + Найти следующий – переход к следующему объекту, удовлетворяющему заданному условию поиска;
 + Опорные точки – ввод координат точек метрики объектов методами геодезических построений. Исходные данные для геодезических построений формируются в результате полевых измерений. Особенности оцифровки методом «Опорных точек» см. в части «Создание и редактирование объектов» руководства пользователя (описание команды функционального меню «Окна» – «Опорные точки»).
 
## Контекстное меню в режиме создания нового объекта

В режиме создания нового объекта при нажатой кнопке инструмента ![alt-текст](../_assets/tool_new.png) при клике правой кнопкой мыши в области окна редактора появляется следующее контекстное меню:

![alt-текст](_assets/context_menu_new.png "Контекстное меню окна «Редактор» в режиме создания нового объекта")

 + Новый объект – режим «по умолчанию» ввод нового объекта;
 + Собрать объект – создание объекта по существующим рёбрам в цепочно-узловой структуре;
 + Новое ребро – создание нового ребра по двум узлам в цепочно-узловой структуре;
 + Новый узел – создание нового узла в цепочно-узловой структуре;
 + Внутренний контур – при выборе команды необходимо указать родительский полигональный объект, после подтверждения выбора объекта оцифровать контур внутри данного объекта, который будет автоматически создан в виде дочернего объекта – «дырки» к родительскому;
 + Добавить подпись – создание дочерней	подписи к указанному объекту. После выбора команды необходимо указать объект в карте, затем место установки подписи, после указания места будет выведен диалог редактора подписей в котором задаётся текст и стиль подписи;
 + Добавить знак – создание нового точечного объекта, аналогичного указанному. После выбора команды необходимо указать знак в карте, затем место для установки нового знака. Если последовательно устанавливать новые знаки, то они будут собраны в коллекцию, а если после установки нового знака нажимать ESC, то новый знак будет самостоятельным объектом;
 + Указать объект – выбор кода из объекта карты для оцифровки нового объекта. При выборе команды надо указать объект в карте, кодом которого будет выполняться создание нового объекта;
 + Опорные точки – открытие диалогового окна «Опорные точки».
 
## Окно выбора объекта «Легенда»

Окно «Легенда» отображает состав классификатора активной карты проекта и предназначено для выбора кодов объектов, которые используются при оцифровке карты. Окно открывается автоматически при нажатии кнопок ![alt-текст](../_assets/tool_new.png) и ![alt-текст](../_assets/tool_code.png) в панели инструментов или с помощью горячей клавиши F6.

![alt-текст](_assets/win_legenda.png "Вид окна «Легенда» (по умолчанию)")

Описание элементов окна Легенды:

 1. Информационная строка, в которой отображаются имя классификатора, код и характер локализации указанного в Легенде объекта;
 1. Акроним/Название текущего объекта или слоя;
 1. Поле с треугольными метками, обозначающие объекты типа «меню»;
 1. Поле отображения текущего уровня Легенды классификатора;
 1. Кнопка перехода на верхний уровень ;
 1. Кнопка для просмотра состава Комбинации кодов  (активна только на коде с Комбинацией объектов);
 1. Кнопка перехода к координированным атрибутам объекта  (активна только на тех объектах, у которых в бланках присутствуют координированные атрибуты);
 1. Поле скроллинга для перемещения по уровню.
 
При нажатии правой кнопки мыши в окне Легенды доступны следующие команды контекстного меню

![alt-текст](_assets/win_legenda_context_menu.png "Команды контекстного меню окна «Легенда»")

+ Развернуть – развёрнутый вид Легенды в виде списка кодов:

![alt-текст](_assets/win_legenda2.png "Вид окна «Легенда» (развёрнутый)")

+ Свернуть – переключение на стандартный вид Легенды;
+ Горячий буфер – переход к динамическому меню последних используемых кодов объектов. «Горячий буфер» представляет собой список 16-ти последних объектов оцифрованных на данной карте, и используется для удобства цифрования, если цифруемые в данный момент объекты расположены в разных слоях. Пиктограммы в «горячем буфере» постоянно движутся, т.к. на первое место всегда встаёт пиктограмма последнего оцифрованного объекта;
+ Меню объектов – возврат из меню «Горячий буфер» к меню объектов;
+ Найти первый – открытие диалога поиска объектов в Легенде;
+ Найти следующий – переход к следующему объекту Легенды, удовлетворяющему условию поиска;
+ Название объекта – настройка отображения объекта в развёрнутом списке Легенды;
+ Упорядочить – настройка порядка расположения объектов Легенды.

Для выбора слоя или объекта следует указать левой кнопкой мыши соответствующую пиктограмму или строку развёрнутого списка Легенды. Если код объекта имеет несколько характеров локализации, при выборе объекта необходимо дополнительно указать нужный характер локализации или тип объекта, нажав на соответствующую кнопку в правой верхней части легенды.

Для перехода на уровень ниже следует дважды кликнуть по пиктограмме текущего уровня или по строке развёрнутого списка Легенды.

### Поиск объектов в Легенде

Для поиска объектов в Легенде необходимо нажать правой кнопкой мыши в окне Легенды для вызова контекстного меню и выбрать в нём команду «Найти первый», после чего появится следующий диалог:

![alt-текст](_assets/win_legenda_search.png "Поиск объекта в Легенде")

Поиск можно осуществлять по названию (акрониму), коду и характеру локализации или типу объекта. После нажатия кнопки «OK» программа переключит позицию курсора в Легенде на первый объект, удовлетворяющий условию поиска. Если первый найденный объект не подходит, то перейти к следующему можно снова вызвав контекстное меню и выбрав там команду «Найти следующий».

### Характер локализации объекта и тип объекта в легенде карты

Порядок метрического описания и способ отображения объекта на карте определяются двумя способами – характером локализации и типом объекта. Т.к. объект одного кода может быть представлен в нескольких характерах локализации, то для обозначения типа или характера локализации объекта в Легенде используются специальные пиктограммы, расположенные в правом верхнем углу Легенды:

![alt-текст](../_assets/but_leg_no_metric.png) — Объект без метрики (тип объекта);
![alt-текст](../_assets/but_leg_sign.png) — Знак (характер локализации);
![alt-текст](../_assets/but_leg_line.png) — Линия (характер локализации);
![alt-текст](../_assets/but_leg_polygon.png) — Полигон (характер локализации);
![alt-текст](../_assets/but_leg_text.png) — Текст (тип объекта).

В окне «Легенда» объект без метрики обозначается так же, как объект типа «Меню» – признак «0» после кода объекта:

![alt-текст](_assets/legenda_no_metric.png "Пример выбранного объекта без метрики в окне «Легенда»")

Точечный объект имеет тип «Знак» и обозначается типом «1» после кода объекта:

![alt-текст](_assets/legenda_sign.png "Пример выбранного объекта «Знак» в окне «Легенда»")

Линейный объект имеет тип «Линия» и обозначается типом «2» после кода объекта:

![alt-текст](_assets/legenda_line.png "Пример выбранного объекта «Линия» в окне «Легенда»")

Площадной объект имеет тип «Область» и обозначается типом «3»:

![alt-текст](_assets/legenda_polygon.png "Пример выбранного объекта «Полигон» в окне «Легенда»")

Подписи имеют тип «Текст» и обозначаются типом «4» после кода объекта. Объект типа «Текст», как правило, не может иметь других характеров локализаций, поэтому в легенде пиктограмма «Текст» ![alt-текст](../_assets/but_leg_text.png) не отображается:

![alt-текст](_assets/legenda_text.png "Пример выбранного объекта без метрики в окне «Легенда»")

## Управление слоями карты – окно «Слои»

Окно «Слои» предназначено для управления слоями карт, а также получения информации о составе слоёв карт проекта. В данном окне можно управлять видимостью карт, загруженных в проект и назначать активную карту проекта. Открытие окна производится командой функционального меню «Окна» – «Атрибуты» или горячей клавишей F7. Ниже приведён пример окна «Слои», когда в проект загружено несколько карт:

![alt-текст](_assets/win_layers_prj.png "Вид окна «Слои» при работе с несколькими картами в проекте")

+ Верхний ряд флагов над пиктограммами – включение/отключение видимости слоёв.
+ Нижний ряд флагов над пиктограммами – включение/отключение запрета редактирования слоёв.

При нажатии правой кнопки мыши в окне «Слои» появляется контекстное меню со следующими командами:

![alt-текст](_assets/win_layers_context_menu.png "Команды контекстного меню окна «Слои»")

Функции кнопок окна «Слои»:

![alt-текст](../_assets/but_layers_dm.png) — переключение активной карты проекта;
![alt-текст](../_assets/but_layers_code.png) — назначение кода слою указанного в окне «Легенда», для назначения кода тип выбранного объекта Легенды должен быть «Меню»;
![alt-текст](../_assets/but_layers_layer_add.png) — добавление нового слоя в карту;
![alt-текст](../_assets/but_layers_layer_del.png) — удаление выделенного слоя;
![alt-текст](../_assets/but_layers_layer_left.png) — переместить слой влево (ниже по уровню отображения);
![alt-текст](../_assets/but_layers_layer_right.png) — переместить слой вправо (выше по уровню отображения);
![alt-текст](../_assets/but_layers_info.png) — получить информацию о составе слоя (при вызове команды появится запрос, который аналогичен запросу команды «Карта» – «Информация…»);
![alt-текст](../_assets/but_open_win_right.png) — открывает/скрывает панель управления видимостью карт проекта.
 
## Управление отображением атрибутов (виртуальные знаки и подписи)

## Управление отображением координированных атрибутов

## Настройка ассоцииации файлов карт *.dm с программой dmw.exe

## Окно «Просмотр…»
